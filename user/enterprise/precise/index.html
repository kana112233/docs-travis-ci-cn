<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Precise Build Containers for Enterprise - Travis CI</title>
<link rel="stylesheet" href="/docs-travis-ci-cn/assets/stylesheets/main.css">
<link rel="alternate" type="application/rss+xml" title="Travis CI Build Environment Updates" href="https://docs.travis-ci.com/feed.build-env-updates.xml">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" defer></script>

<script src="/docs-travis-ci-cn/assets/javascripts/main.js" type="text/javascript" charset="utf-8" defer></script>
<script src="/docs-travis-ci-cn/assets/javascripts/prism.js" type="text/javascript" charset="utf-8" defer></script>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24868285-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </head>
  <body class="enterprise">
    <div class="wrapper">

      <header class="top">
  <div class="row topbar">
    <h1 id="logo" class="logo">
  <a href="https://travis-ci.com/" title="Travis CI">Travis</a>
</h1>

    <nav>
      <ul id="navigation" class="navigation">
        <li><a href="https://blog.travis-ci.com">Blog</a></li>
        <li><a href="/">Docs</a></li>
        <li class="toggle"><button type="button" id="toggle-menu" class="button--teal">Menu</button></li>
      </ul>
    </nav>
  </div>
</header>


      <div id="content" class="row">

        <div id="sidebar" class="sidebar">
  <div>
    <!-- <h2>Search</h2> -->
    <div class="searchbox">
      <form>
        <input type="text" id="st-search-input" class="searchbox-input" placeholder="Search the docs" />
      </form>
      <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
        (function() {
          Swiftype.key = 'tXvDDzd4fNTBnLvxfEyx';

      Swiftype.searchSearchFields = {
            "page": ["title, body, tags"]
          };
          Swiftype.autocompleteSearchFields = {
            "page": ["title, body, tags"]
          };
          /** DO NOT EDIT BELOW THIS LINE **/
          var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
          script.src = "//swiftype.com/embed.js";
          var entry = document.getElementsByTagName('script')[0];
          document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
        }());
      </script>
    </div>
  </div>

  <section class="sidebar-navigation">
    <nav>
      <h3>Travis CI Enterprise</h3>
      <ul>
        <li><a href="/docs-travis-ci-cn/user/enterprise/">About Travis CI Enterprise</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/setting-up-travis-ci-enterprise/">Setting up Travis CI Enterprise</a> </li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/upgrading/">Upgrading</a></li>
      </ul>

      <h3>Environment reference</h3>
      <ul>
        <li><a href="/docs-travis-ci-cn/user/enterprise/xenial">Xenial Build Environment</a></li>

        <li><a href="/docs-travis-ci-cn/user/enterprise/trusty/">Trusty Build Environment</a></li>

        <li><a href="/docs-travis-ci-cn/user/enterprise/precise/">Precise (Legacy) Build Environment</a></li>
      </ul>

      <h3>Customizing Travis CI Enterprise</h3>
      <ul>
        <li><a href="/docs-travis-ci-cn/user/enterprise/worker-configuration/">Worker Configuration</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/build-images/">Customizing Build Images</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/high-availability/">High Availability</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/custom-queues/">Custom Queues</a></li>
      </ul>

      <h3>Enterprise Operations Manual</h3>
      <ul>
        <li><a href="/docs-travis-ci-cn/user/enterprise/platform-tips/">Platform Administration Tips</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/worker-cli-commands/">Worker Start & Debug Containers</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/ssl-certificate-management/">SSL Certificate Management</a></li>
        <li><a href="/docs-travis-ci-cn/user/enterprise/troubleshooting-guide/">Troubleshooting Guide</a></li>
      </ul>

      <h3>Travis CI Docs</h3>
      <ul>
        <li><a href="/">Travis CI Docs</a></li>
      </ul>
    </nav>
  </section>

  <section class="sidebar-notice">
    <p>This documentation site is open source.
      The <a href="https://github.com/travis-ci/docs-travis-ci-com">README in our Git repository</a> explains how to contribute.</p>
  </section>

</div><!-- /#sidebar -->


        <main id="main" class="main" data-swiftype-index='true'>
          
            <aside class="improve-page"><a href="https://github.com/travis-ci/docs-travis-ci-com/edit/master/user/enterprise/precise.md" target="_blank" title="Edit this page on GitHub" class="button-pen" data-proofer-ignore>Improve this page on GitHub</a></aside>
            <h1 class="title">Precise Build Containers for Enterprise</h1>
          

          
            <div id="toc" class="toc">
              <ul class="list-language">
  <li><a href="#系统设置">系统设置</a></li>
  <li><a href="#travis-worker"><code class="highlighter-rouge">travis-worker</code></a></li>
  <li><a href="#联系企业支持">联系企业支持</a></li>
</ul>

            </div>
          

          <h2 id="系统设置">系统设置 <a href="#系统设置" class="toc-anchor">#</a></h2>

<p><strong>平台要求</strong>：Travis CI Enterprise 2.0及更高版本支持精确构建容器。我们推荐<a href="/user/enterprise/trusty/">可靠的构建环境</a>对于Travis CI Enterprise 2.2+，因为Trusty Build Environments是默认环境。</p>

<p>对于Travis CI Enterprise 2.2+上默认的旧工作者，请在管理仪表板中覆盖故障行为<code class="highlighter-rouge">https://&lt;your-travis-ci-enterprise-domain&gt;:8800/settings#override_default_dist_enable</code></p>

<p><em>**</em>：</p>

<p>Legacy worker必须运行Ubuntu 14.04 LTS作为底层操作系统。我们建议使用AWS<code class="highlighter-rouge">c3.2xlarge</code>作为实例类型。在安装和操作期间，端口22必须为SSH打开。</p>

<p>此外，精确构建容器和Trusty构建容器必须位于不同的实例上</p>

<p>##</p>

<p>一旦工作器实例启动并运行，<code class="highlighter-rouge">travis-worker</code>可以按如下方式安装：</p>

<p>对于AWS上的实例，请运行：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -sSL -o /tmp/installer.sh https://enterprise.travis-ci.com/install/worker/legacy

sudo bash /tmp/installer.sh \
--travis_enterprise_host="[travis.yourhost.com]" \
--travis_enterprise_security_token="[RabbitMQ Password/Enterprise Security Token] \
--aws=true"

</code></pre></div></div>

<p>对于非AWS实例，请运行：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl -sSL -o /tmp/installer.sh https://enterprise.travis-ci.com/install/worker/legacy

sudo bash /tmp/installer.sh \
--travis_enterprise_host="[travis.yourhost.com]" \
--travis_enterprise_security_token="[RabbitMQ Password/Enterprise Security Token]"

</code></pre></div></div>

<p>此安装程序使用Docker<code class="highlighter-rouge">aufs</code></p>

<h2 id="travis-worker"><code class="highlighter-rouge">travis-worker</code> <a href="#travis-worker" class="toc-anchor">#</a></h2>

<p>安装后，或者对工作程序应用配置更改时，请按如下方式重新启动工作程序：</p>

<p><code class="highlighter-rouge">sudo service travis-worker restart</code></p>

<h2 id="联系企业支持">联系企业支持 <a href="#联系企业支持" class="toc-anchor">#</a></h2>

<p>To get in touch with us, please write a message to 
<a href="mailto:enterprise@travis-ci.com">enterprise@travis-ci.com</a>. If possible, 
please include as much of the following as you can:</p>

<ul>
  <li>Description of the problem - what are you observing?</li>
  <li>Which steps did you try already?</li>
  <li>A support bundle (You can get it from <code class="highlighter-rouge">https://&lt;your-travis-ci-enterprise-domain&gt;:8800/support</code>)</li>
  <li>Log files from all workers (They can be found at <code class="highlighter-rouge">/var/log/upstart/travis-worker.log</code> - please include as many as you can retrieve).</li>
  <li>If a build failed or errored, a text file of the build log</li>
</ul>

<p>Have you made any customizations to your setup? While we may be able to see some 
information (such as hostname, IaaS provider, and license expiration), there 
are many other things we can’t see which could lead to something not working. 
Therefore , we’d like to ask you to also answer the questions below in your 
support request (if applicable):</p>

<ul>
  <li>How many machines are you using?</li>
  <li>Do you use configuration management tools (Chef, Puppet)?</li>
  <li>Which other services do interface with Travis CI Enterprise?</li>
  <li>Do you use Travis CI Enterprise together with github.com or GitHub Enterprise?</li>
  <li>If you’re using GitHub Enterprise, which version of it?</li>
</ul>

<p>We’re looking forward to helping!</p>


        </main>
      </div><!-- /#content -->

      <footer class="footer">
  <div class="layout-inner">
    <div class="footer-elem">
      <svg width="142px" height="45.381px" viewBox="0 0 142 45.381" enable-background="new 0 0 142 45.381" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
        <title>Travis CI Mascot</title>
        <image xlink:href="https://styleguide.travis-ci.com/images/logos/travis-footer-logo-new.svg" x="0" y="0" width="142px" height="45.381px" />
      </svg>
    </div>

    <div class="footer-elem"></div>

    <div class="footer-elem">
      <h3 class="footer-title">©Travis CI, GmbH</h3>
      <address>Rigaer Straße 8<br>10247 Berlin, Germany</address>
      <ul>
        <li><a href="https://travisci.workable.com/" title="Jobs at Travis CI">Work with Travis CI</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Help</h3>
      <ul>
        <li><a href="https://docs.travis-ci.com" title="Travis CI Docs">Documentation</a></li>
        <li><a href="https://changelog.travis-ci.com/">Changelog</a></li>
        <li><a href="https://blog.travis-ci.com/" title="Travis CI Blog">Blog</a></li>
        <li><a href="mailto:support@travis-ci.com" title="Email Travis CI support">Email</a></li>
        <li><a href="https://twitter.com/travisci" title="Travis CI on Twitter">Twitter</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Legal</h3>
      <ul>
        <li><a href="/docs-travis-ci-cn/imprint.html" title="Imprint">Imprint</a></li>
        <li><a href="/docs-travis-ci-cn/legal/terms-of-service/">Terms of Service</a></li>
        <li><a href="/docs-travis-ci-cn/legal/refund-policy/">Refund Policy</a></li>
        <li><a href="/docs-travis-ci-cn/legal/data-processing-agreement">Data Processing Agreement</a></li>
        <li><a href="/docs-travis-ci-cn/legal/privacy-policy/">Privacy Policy</a></li>
        <li><a href="/docs-travis-ci-cn/legal/privacy-shield-framework/">Privacy Shield Framework</a></li>
        <li><a href="/docs-travis-ci-cn/legal/security/">Security Statement</a></li>
      </ul>
    </div>

    <div class="footer-elem">
      <h3 class="footer-title">Travis CI Status</h3>
      <ul>
        <li><div class="status-circle status">Status:</div>
          <a href="http://www.traviscistatus.com/">Travis CI Status</a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<script>
 fetch('https://pnpcptp8xh9k.statuspage.io/api/v2/status.json').then(function(response) {
   return response.json();
 }).then(function(data) {
   if (data.status && data.status.indicator) {
     document.querySelector('.status-circle').classList.add(data.status.indicator);
   }
 });
</script>

    </div><!-- /.wrapper -->
  </body>
</html>
